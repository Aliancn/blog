---

title: "前缀和与差分"
summary: "前缀和与差分的简单运用"
date: 2023-02-28
weight: 
tags: ["前缀和","差分"]
author: "CHuSeng"
draft: false
isCJKLanguage: true
---

## 前缀和







## 差分

* 差分描述了后者与前者的关系
* 能简化区间操作的更改次数

#### 一维

###### 1.差分数组的构造

```c++
int num;//原数组
int dif[maxn];//差分数组
dif[1]=num[1];
for(int i=2;i<=numCount;i++){
    dif[i]=num[i]-num[i-1];
}

```

###### 2.差分数组的操作

```c++
/* 在区间[l,r]上每个元素加c  */
void add(int l,int r,int c){
    dif[l]=dif[l]+c;//表示l以及l之后的元素都加c
	dif[r+1]=dif[r+1]-r;//表示r+1以及r+1之后的元素都减c
}
```

###### 3.原数组的重建

```c++
void rebuild(){
    num[1]=dif[1];
	for(int i=2;i<=numCount;i++)
    	num[i]=num[i-1]+dif[i];
}
```



#### 二维

* 由于二维数组不好直接看出差分数组的构造方法，先写出操作方法

###### 1.差分数组的操作

```c++
int num[maxn][maxn];
int dif[maxn][maxn];
//把左上角（x1,y1）右下角（x2,y2）的区间里的元素加c
void add(int x1,int y1,int x2,int y2,int c){
    dif[x1][y1]+=c;
    dif[x2+1][y1]-=c;
    dif[x1][y2+1]-=c;
    dif[x2+1][y2+1]+=c;
}

```

###### 2.差分数组的构造

有了对区间操作的方法，我们就可以开始构造差分数组了

我们假设原数组为空，接下来我们要在左上角为( i , j )，右下角为( i , j )的区间加上`num[i][j]`

```c++
void init(){
    for(int i=1;i<=n;i++){
        for(int j=1;j<=m;j++)
            add(i,j,i,j,num[i][j]);   
}
```

###### 3.原数组的重建

```c++
void rebuild(){
    for(int i=1;i<=numRCount;i++)
        for(int j=1;j<=numCCount;j++)
            num[i][j]=num[i][j-1]+num[i-1][j]-num[i-1][j-1]+dif[i][j];
}
```



















